<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>布灵的创作空间 - 设定集</title>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
    <div class="container">
        <div class="works-container">
            <h2 class="works-title">设定集</h2>
            
            <div class="works-grid">
                <!-- 因赛美那（绑定IP文件夹名insaimena） -->
                <div class="work-card">
                    <img src="../../images/card.jpg" alt="因赛美那" class="work-card-image">
                    <div class="work-card-content">
                        <h3 class="work-card-title">因赛美那</h3>
                        <p class="work-card-description">因赛美那的设定集，包含所有版本的世界观背景、角色来历、角色人设等内容。</p>
                        <button class="work-card-button" onclick="loadSetting('yinsaimeina')">查看详情</button>
                    </div>
                </div>
                
                <!-- 樱之都奈樱（绑定IP文件夹名sakura） -->
                <div class="work-card">
                    <img src="../../images/card.jpg" alt="樱之都·奈樱" class="work-card-image">
                    <div class="work-card-content">
                        <h3 class="work-card-title">樱之都·奈樱</h3>
                        <p class="work-card-description">樱之都·奈樱的设定集，包含所有版本的世界观背景、角色来历、角色人设等内容。</p>
                        <button class="work-card-button" onclick="loadSetting('yingzhidu')">查看详情</button>
                    </div>
                </div>
                
                <!-- 妖鬼街（绑定IP文件夹名yaoguijie） -->
                <div class="work-card">
                    <img src="../../images/card.jpg" alt="妖鬼街" class="work-card-image">
                    <div class="work-card-content">
                        <h3 class="work-card-title">妖鬼街</h3>
                        <p class="work-card-description">妖鬼街的设定集，包含所有版本的世界观背景、角色来历、角色人设等内容。</p>
                        <button class="work-card-button" onclick="loadSetting('yaoguijie')">查看详情</button>
                    </div>
                </div>
                
                <!-- 陀罗少女（绑定IP文件夹名tuoluoshaonv） -->
                <div class="work-card">
                    <img src="../../images/card.jpg" alt="陀罗少女" class="work-card-image">
                    <div class="work-card-content">
                        <h3 class="work-card-title">陀罗少女</h3>
                        <p class="work-card-description">陀罗少女的设定集，包含所有版本的世界观背景、角色来历、角色人设等内容。</p>
                        <button class="work-card-button" onclick="loadSetting('tuoluoshaonv')">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 作品详情展示区域（结构不变） -->
            <div id="workDetail" class="work-detail-container" style="display: none;">
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                </div>
                
                <div id="workContent" style="display: none;">
                    <h2 class="work-detail-title" id="detailTitle"></h2>
                    
                    <div class="work-detail-content">
                        <div class="work-detail-image">
                            <img id="detailImage" src="" alt="作品图片">
                        </div>
                        
                        <div class="work-detail-info">
                            <div class="work-detail-description" id="detailDescription"></div>
                            
                            <div class="work-detail-meta">
                                <div class="work-detail-meta-item">
                                    <span class="work-detail-meta-label">创作时间：</span>
                                    <span id="detailTime"></span>
                                </div>
                                
                                <div class="work-detail-meta-item">
                                    <span class="work-detail-meta-label">类型：</span>
                                    <span id="detailType"></span>
                                </div>
                                
                                <div class="work-detail-meta-item">
                                    <span class="work-detail-meta-label">状态：</span>
                                    <span id="detailStatus"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="error" id="error" style="display: none;">
                    <p>加载作品详情失败，请稍后再试。</p>
                </div>
            </div>
        </div>
    </div>

    <script src="../../js/navbar.js"></script>
    <script>
        /**
         * 加载指定IP的设定内容
         * @param {string} settingKey - IP文件夹名称（如insaimena、sakura）
         */
        function loadSetting(settingKey) {
            // 显示加载动画
            const workDetail = document.getElementById('workDetail');
            const loading = document.getElementById('loading');
            const workContent = document.getElementById('workContent');
            const error = document.getElementById('error');
            
            workDetail.style.display = 'block';
            loading.style.display = 'flex';
            workContent.style.display = 'none';
            error.style.display = 'none';

            // 异步加载对应IP的设定文件（setting.json）
            fetch(`data/${settingKey}/setting.json`)
                .then(response => {
                    if (!response.ok) throw new Error('设定文件加载失败');
                    return response.json();
                })
                .then(settingData => {
                    // 更新设定内容到页面
                    document.getElementById('detailTitle').textContent = settingData.title;
                    document.getElementById('detailImage').src = settingData.image;
                    document.getElementById('detailImage').alt = settingData.title;
                    document.getElementById('detailDescription').innerHTML = settingData.description;
                    document.getElementById('detailTime').textContent = settingData.time;
                    document.getElementById('detailType').textContent = settingData.type;
                    document.getElementById('detailStatus').textContent = settingData.status;

                    // 显示内容，隐藏加载动画
                    loading.style.display = 'none';
                    workContent.style.display = 'block';
                    workDetail.scrollIntoView({ behavior: 'smooth' });
                })
                .catch(err => {
                    console.error('加载失败:', err);
                    loading.style.display = 'none';
                    error.style.display = 'block';
                });
        }
    </script>
</body>
</html>
