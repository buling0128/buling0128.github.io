<!DOCTYPE html>
<html>
  <style>
    /* 公告栏样式 */
    .announcement-bar {
      background-color: #eff6ff;
      border-bottom: 2px solid #2563eb;
      padding: 10px 0;
      position: sticky;
      top: 0;
      z-index: 100;
      text-align: center;
      font-size: 1rem;
      transition: opacity 0.3s, transform 0.3s;
    }

    .announcement-bar.hidden {
      opacity: 0;
      transform: translateY(-100%);
      pointer-events: none;
    }

    .announcement-content {
      color: #1e40af;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .close-announcement {
      color: #2563eb;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      padding: 0 5px;
      transition: color 0.2s;
    }

    .close-announcement:hover {
      color: #dc2626;
    }

    /* 看板娘容器（核心优化：固定最小高度，避免布局抖动） */
    .kanban-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      background-color: #f8fafc;
      position: relative;
      min-height: 450px; /* 固定最小高度，适应最长文本高度 */
    }

    /* 看板娘图片（优化：绝对定位脱离文档流，彻底避免移动） */
    .kanban-img {
      width: 360px;
      height: auto;
      cursor: pointer;
      transition: transform 0.3s;
      flex-shrink: 0;
      position: relative; /* 相对定位确保层级 */
      z-index: 10;
    }

    .kanban-img:hover {
      transform: scale(1.05);
    }

    /* 对话气泡（核心优化：固定最小高度，添加左间距避免挤压图片） */
    .kanban-bubble {
      max-width: 600px;
      padding: 20px 25px;
      background-color: white;
      border-radius: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      position: relative;
      font-size: 1.1rem;
      line-height: 1.6;
      transition: opacity 0.2s ease;
      min-height: 120px; /* 固定最小高度，避免内容变化导致高度波动 */
      margin-left: 20px; /* 用margin-left替代图片的margin-right，避免挤压 */
    }

    .kanban-bubble::before {
      content: '';
      position: absolute;
      left: -15px;
      top: 50%;
      transform: translateY(-50%);
      border: 15px solid transparent;
      border-right-color: white;
      pointer-events: none;
    }

    /* 手机端适配（保持布局稳定） */
    @media (max-width: 768px) {
      .kanban-container {
        flex-direction: column;
        text-align: center;
        min-height: 350px; /* 手机端调整最小高度 */
      }
      .kanban-img {
        margin-right: 0;
        margin-bottom: 20px;
        width: 150px;
      }
      .kanban-bubble {
        min-height: 100px;
        margin-left: 0; /* 手机端取消左间距 */
      }
      .kanban-bubble::before {
        left: 50%;
        top: -15px;
        transform: translateX(-50%);
        border-right-color: transparent;
        border-bottom-color: white;
      }
      .announcement-bar {
        font-size: 0.9rem;
        padding: 8px 0;
      }
    }
  </style>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>布灵的创作空间</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  </head>

  <body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="index.html" style="font-weight: 700; color: #2563eb;">
          <i class="fa fa-bookmark-o"></i> 布灵的创作空间
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link active" href="index.html"><i class="fa fa-home"></i> 首页</a></li>
            <li class="nav-item"><a class="nav-link" href="settings.html"><i class="fa fa-list-alt"></i> 设定集</a></li>
            <li class="nav-item"><a class="nav-link" href="stories.html"><i class="fa fa-book"></i> 故事集</a></li>
            <li class="nav-item"><a class="nav-link" href="gallery.html"><i class="fa fa-picture-o"></i> 图片展览馆</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html"><i class="fa fa-info-circle"></i> 关于本站</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- 公告栏 -->
    <div class="announcement-bar" id="announcementBar">
      <div class="container announcement-content">
        <i class="fa fa-bullhorn" aria-hidden="true"></i>
        <span>内容正在持续更新</span>
        <button class="close-announcement" id="closeAnnouncement">
          <i class="fa fa-times"></i> 关闭
        </button>
      </div>
    </div>

    <!-- 看板娘区域 -->
    <div class="kanban-container">
      <img src="images/kanban-girl.png" alt="看板娘" class="kanban-img" id="kanbanGirl">
      <div class="kanban-bubble" id="kanbanBubble">
        你好！我是看板娘墨文绘颜～ 欢迎来到布灵的创作空间～这里是首页，点击上方导航可查看其他内容。
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 交互脚本 -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // 公告栏关闭功能
        const announcementBar = document.getElementById('announcementBar');
        const closeBtn = document.getElementById('closeAnnouncement');
        
        closeBtn.addEventListener('click', function() {
          announcementBar.classList.add('hidden');
        });

        // 看板娘交互
        const randomTexts = [
          "你好，我叫墨文绘颜，你可以叫我小墨，也可以叫我小颜，也可以叫我墨颜，嗯……好像哪里不太对？",
          "我的生日是10月22日，天秤座，属蛇，喜欢写作、绘画、打游戏，虽然写的不咋地，画的也不咋地，打游戏也不咋地……",
          "虽然我现在是ai绘制的形象，但是老大说有空时会亲手给我绘制形象的，好期待啊……虽然他画的可能还不如现在呢，别跟他说啊，我会被开除的！",
          "好想……成为人类啊！！！！！！",
          "老大挖的坑太多了，根本填不完的吧！",
          "老大总是搞些没什么用的小功能，比如这个点击对话功能，有心思搞这个不如去好好优化网站呢……",
          "我的工资？这个嘛…………唉……TAT",
          "什么时候我也能动起来呢……",
          "总有一天，我会辞掉这份看板娘的工作，去看一看外面的世界！",
          "偷偷告诉你，我穿的衣服其实跟老大的初恋有关哦，在【设定集】-【因赛美那】-【因赛美那原初版】-【人物设定】-【寂灵】里有关于她的详细故事哦~",
          

        ];

        const kanbanGirl = document.getElementById('kanbanGirl');
        const kanbanBubble = document.getElementById('kanbanBubble');
        const defaultText = kanbanBubble.textContent;

        kanbanGirl.addEventListener('click', function() {
          const randomIndex = Math.floor(Math.random() * randomTexts.length);
          const randomText = randomTexts[randomIndex];
          
          if (randomText !== kanbanBubble.textContent) {
            kanbanBubble.style.opacity = '0.5';
            setTimeout(() => {
              kanbanBubble.textContent = randomText;
              kanbanBubble.style.opacity = '1';
            }, 200);
          }
        });

        window.addEventListener('load', () => {
          kanbanBubble.textContent = defaultText;
        });
        window.addEventListener('pageshow', (e) => {
          if (e.persisted) kanbanBubble.textContent = defaultText;
        });
      });
    </script>
  </body>
</html>
