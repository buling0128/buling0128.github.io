<!DOCTYPE html>
<html>
  <style>
    /* 公告栏样式 */
    .announcement-bar {
      background-color: #eff6ff;
      border-bottom: 2px solid #2563eb;
      padding: 10px 0;
      position: sticky;
      top: 0;
      z-index: 100;
      text-align: center;
      font-size: 1rem;
      transition: opacity 0.3s, transform 0.3s; /* 关闭时添加动画 */
    }

    /* 关闭状态的公告栏（隐藏） */
    .announcement-bar.hidden {
      opacity: 0;
      transform: translateY(-100%); /* 向上滑出视野 */
      pointer-events: none; /* 隐藏后不响应点击 */
    }

    .announcement-content {
      color: #1e40af;
      font-weight: 500;
      display: flex; /* 用flex布局排列文字和关闭按钮 */
      align-items: center;
      justify-content: center;
      gap: 10px; /* 文字和按钮间距 */
    }

    /* 关闭按钮样式 */
    .close-announcement {
      color: #2563eb;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      padding: 0 5px;
      transition: color 0.2s;
    }

    .close-announcement:hover {
      color: #dc2626; /* hover时变红，提示关闭功能 */
    }

    /* 看板娘容器及其他原有样式（保持不变） */
    .kanban-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      background-color: #f8fafc;
      position: relative;
    }

    .kanban-img {
      width: 360px;
      height: auto;
      cursor: pointer;
      transition: transform 0.3s;
      margin-right: 20px;
      flex-shrink: 0;
    }

    .kanban-img:hover {
      transform: scale(1.05);
    }

    .kanban-bubble {
      max-width: 600px;
      padding: 20px 25px;
      background-color: white;
      border-radius: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      position: relative;
      font-size: 1.1rem;
      line-height: 1.6;
      transition: opacity 0.2s ease;
    }

    .kanban-bubble::before {
      content: '';
      position: absolute;
      left: -15px;
      top: 50%;
      transform: translateY(-50%);
      border: 15px solid transparent;
      border-right-color: white;
      pointer-events: none;
    }

    @media (max-width: 768px) {
      .kanban-container {
        flex-direction: column;
        text-align: center;
      }
      .kanban-img {
        margin-right: 0;
        margin-bottom: 20px;
        width: 150px;
      }
      .kanban-bubble::before {
        left: 50%;
        top: -15px;
        transform: translateX(-50%);
        border-right-color: transparent;
        border-bottom-color: white;
      }
      .announcement-bar {
        font-size: 0.9rem;
        padding: 8px 0;
      }
    }
  </style>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>布灵的创作空间</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  </head>

  <body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="index.html" style="font-weight: 700; color: #2563eb;">
          <i class="fa fa-bookmark-o"></i> 布灵的创作空间
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link active" href="index.html"><i class="fa fa-home"></i> 首页</a></li>
            <li class="nav-item"><a class="nav-link" href="settings.html"><i class="fa fa-list-alt"></i> 设定集</a></li>
            <li class="nav-item"><a class="nav-link" href="stories.html"><i class="fa fa-book"></i> 故事集</a></li>
            <li class="nav-item"><a class="nav-link" href="gallery.html"><i class="fa fa-picture-o"></i> 图片展览馆</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html"><i class="fa fa-info-circle"></i> 关于本站</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- 公告栏（修改为点击关闭功能） -->
    <div class="announcement-bar" id="announcementBar">
      <div class="container announcement-content">
        <i class="fa fa-bullhorn" aria-hidden="true"></i>
        <span>最新更新：因赛美那世界观新增人物设定</span>
        <!-- 关闭按钮（替换原链接） -->
        <button class="close-announcement" id="closeAnnouncement">
          <i class="fa fa-times"></i> 关闭
        </button>
      </div>
    </div>

    <!-- 看板娘区域 -->
    <div class="kanban-container">
      <img src="images/kanban-girl.png" alt="看板娘" class="kanban-img" id="kanbanGirl">
      <div class="kanban-bubble" id="kanbanBubble">
        你好！我是看板娘墨文绘颜～ 欢迎来到布灵的创作空间～这里是首页，点击上方导航可查看其他内容。
      </div>
    </div>

    <!-- 引入Bootstrap脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 公告栏关闭功能 + 看板娘交互脚本 -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // 公告栏关闭功能
        const announcementBar = document.getElementById('announcementBar');
        const closeBtn = document.getElementById('closeAnnouncement');
        
        closeBtn.addEventListener('click', function() {
          announcementBar.classList.add('hidden'); // 添加隐藏类
        });

        // 看板娘交互脚本（保持不变）
        const randomTexts = [
          "设定集里有好多有趣的世界观呢～",
          "故事集更新啦，快去看看新章节！",
          "图片展览馆的插画超美的哦～",
          "点击我可以切换不同的台词呀～",
          "欢迎常来玩，墨文绘颜随时等你～"
        ];

        const kanbanGirl = document.getElementById('kanbanGirl');
        const kanbanBubble = document.getElementById('kanbanBubble');
        const defaultText = kanbanBubble.textContent;

        kanbanGirl.addEventListener('click', function() {
          const randomIndex = Math.floor(Math.random() * randomTexts.length);
          const randomText = randomTexts[randomIndex];
          
          if (randomText !== kanbanBubble.textContent) {
            kanbanBubble.style.opacity = '0.5';
            setTimeout(() => {
              kanbanBubble.textContent = randomText;
              kanbanBubble.style.opacity = '1';
            }, 200);
          }
        });

        window.addEventListener('load', () => {
          kanbanBubble.textContent = defaultText;
        });
        window.addEventListener('pageshow', (e) => {
          if (e.persisted) kanbanBubble.textContent = defaultText;
        });
      });
    </script>
  </body>
</html>
