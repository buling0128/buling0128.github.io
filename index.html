<!DOCTYPE html>
<html>
  <style>
    /* 看板娘容器 */
    .kanban-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      background-color: #f8fafc;
      position: relative;
    }

    /* 看板娘图片（核心优化：固定尺寸和位置，避免移动） */
    .kanban-img {
      width: 360px; /* 固定宽度 */
      height: auto;
      cursor: pointer;
      transition: transform 0.3s; /* 仅保留缩放动画，无位置变化 */
      margin-right: 20px; /* 固定与气泡的间距 */
      flex-shrink: 0; /* 防止图片被挤压变形 */
    }

    .kanban-img:hover {
      transform: scale(1.05); /* 悬停仅放大，不移动 */
    }

    /* 对话气泡样式（优化动画平滑度） */
    .kanban-bubble {
      max-width: 600px;
      padding: 20px 25px;
      background-color: white;
      border-radius: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      position: relative;
      font-size: 1.1rem;
      line-height: 1.6;
      transition: opacity 0.2s ease; /* 平滑淡入淡出 */
    }

    /* 气泡指向箭头（固定位置，不随内容变化） */
    .kanban-bubble::before {
      content: '';
      position: absolute;
      left: -15px;
      top: 50%;
      transform: translateY(-50%);
      border: 15px solid transparent;
      border-right-color: white;
      pointer-events: none; /* 箭头不影响点击 */
    }

    /* 手机端适配（保持图片位置固定） */
    @media (max-width: 768px) {
      .kanban-container {
        flex-direction: column;
        text-align: center;
      }
      .kanban-img {
        margin-right: 0;
        margin-bottom: 20px;
        width: 150px;
      }
      .kanban-bubble::before {
        left: 50%;
        top: -15px;
        transform: translateX(-50%);
        border-right-color: transparent;
        border-bottom-color: white;
      }
    }
  </style>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>布灵的创作空间</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  </head>

  <body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="index.html" style="font-weight: 700; color: #2563eb;">
          <i class="fa fa-bookmark-o"></i> 布灵的创作空间
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link active" href="index.html"><i class="fa fa-home"></i> 首页</a></li>
            <li class="nav-item"><a class="nav-link" href="settings.html"><i class="fa fa-list-alt"></i> 设定集</a></li>
            <li class="nav-item"><a class="nav-link" href="stories.html"><i class="fa fa-book"></i> 故事集</a></li>
            <li class="nav-item"><a class="nav-link" href="gallery.html"><i class="fa fa-picture-o"></i> 图片展览馆</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html"><i class="fa fa-info-circle"></i> 关于本站</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- 看板娘区域 -->
    <div class="kanban-container">
      <img src="images/kanban-girl.png" alt="看板娘" class="kanban-img" id="kanbanGirl">
      <div class="kanban-bubble" id="kanbanBubble">
        你好！我是看板娘墨文绘颜～ 欢迎来到布灵的创作空间～这里是首页，点击上方导航可查看其他内容。
      </div>
    </div>

    <!-- 引入Bootstrap脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 看板娘交互脚本（优化动画，避免图片移动） -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const randomTexts = [
          "设定集里有好多有趣的世界观呢～",
          "故事集更新啦，快去看看新章节！",
          "图片展览馆的插画超美的哦～",
          "点击我可以切换不同的台词呀～",
          "欢迎常来玩，墨文绘颜随时等你～"
        ];

        const kanbanGirl = document.getElementById('kanbanGirl');
        const kanbanBubble = document.getElementById('kanbanBubble');
        const defaultText = kanbanBubble.textContent;

        // 点击事件：仅更新对话框，不影响图片位置
        kanbanGirl.addEventListener('click', function() {
          const randomIndex = Math.floor(Math.random() * randomTexts.length);
          const randomText = randomTexts[randomIndex];
          
          if (randomText !== kanbanBubble.textContent) {
            // 仅对对话框应用动画，图片无任何位置相关操作
            kanbanBubble.style.opacity = '0.5';
            setTimeout(() => {
              kanbanBubble.textContent = randomText;
              kanbanBubble.style.opacity = '1';
            }, 200);
          }
        });

        // 页面加载/返回时重置默认内容
        window.addEventListener('load', () => {
          kanbanBubble.textContent = defaultText;
        });
        window.addEventListener('pageshow', (e) => {
          if (e.persisted) kanbanBubble.textContent = defaultText;
        });
      });
    </script>
  </body>
</html>
